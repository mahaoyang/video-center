# Runway Gen4 è§†é¢‘ç”Ÿæˆ API ä½¿ç”¨è¯´æ˜

Python å®¢æˆ·ç«¯ï¼Œç”¨äº Runway Gen4 å›¾ç”Ÿè§†é¢‘ APIã€‚

## ğŸ“¦ å®‰è£…

```bash
pip install requests
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

```python
from runway import RunwayClient, create_video_5s

# åˆå§‹åŒ–å®¢æˆ·ç«¯
client = RunwayClient(api_token="ä½ çš„token")

# åˆ›å»º5ç§’è§†é¢‘è¯·æ±‚
request = create_video_5s(
    image_url="https://example.com/image.jpg",
    prompt_text="çŒ«å’ªè·³èˆ"
)

# ç”Ÿæˆè§†é¢‘
response = client.generate_video(request)
print(response["data"])
```

## ğŸ¬ æ”¯æŒçš„æ¨¡å‹

| æ¨¡å‹ | æ—¶é•¿ | è¯´æ˜ |
|------|------|------|
| `runwayml-gen4_turbo-5` | 5ç§’ | å¿«é€Ÿç”Ÿæˆï¼Œ5ç§’è§†é¢‘ |
| `runwayml-gen4_turbo-10` | 10ç§’ | å¿«é€Ÿç”Ÿæˆï¼Œ10ç§’è§†é¢‘ |

## ğŸ“ å‚æ•°è¯´æ˜

### å¿…éœ€å‚æ•°

- **promptImage** (str): æºå›¾ç‰‡URL
- **model** (str): ä½¿ç”¨çš„æ¨¡å‹

### å¯é€‰å‚æ•°

- **promptText** (str): æ–‡æœ¬æç¤ºè¯ï¼ˆé»˜è®¤: `""`ï¼‰
- **watermark** (bool): æ˜¯å¦æ·»åŠ æ°´å°ï¼ˆé»˜è®¤: `False`ï¼‰
- **duration** (int): è§†é¢‘æ—¶é•¿ï¼ˆ5æˆ–10ç§’ï¼Œå¿…é¡»ä¸æ¨¡å‹åŒ¹é…ï¼‰
- **ratio** (str): è§†é¢‘å®½é«˜æ¯”ï¼ˆé»˜è®¤: `"1280:768"`ï¼‰

## ğŸ’¡ ä½¿ç”¨ç¤ºä¾‹

### ç¤ºä¾‹ 1: ç”Ÿæˆ5ç§’è§†é¢‘

```python
from runway import RunwayClient, create_video_5s

client = RunwayClient(api_token="ä½ çš„token")

request = create_video_5s(
    image_url="https://example.com/image.jpg",
    prompt_text="çŒ«å’ªç©æ¯›çº¿çƒ"
)

response = client.generate_video(request)
```

### ç¤ºä¾‹ 2: ç”Ÿæˆ10ç§’è§†é¢‘

```python
from runway import create_video_10s

request = create_video_10s(
    image_url="https://example.com/image.jpg",
    prompt_text="æµ·æµªæ‹æ‰“æ²™æ»©"
)

response = client.generate_video(request)
```

### ç¤ºä¾‹ 3: è‡ªå®šä¹‰å®½é«˜æ¯”

```python
from runway import create_video_5s

# å…¨é«˜æ¸… (1920x1080)
request = create_video_5s(
    image_url="https://example.com/image.jpg",
    prompt_text="æ—¥è½å»¶æ—¶æ‘„å½±",
    ratio="1920:1080"
)

# ç«–å± (768x1280)
request = create_video_5s(
    image_url="https://example.com/image.jpg",
    prompt_text="åŸå¸‚è¡—æ™¯",
    ratio="768:1280"
)

# æ–¹å½¢ (1024x1024)
request = create_video_5s(
    image_url="https://example.com/image.jpg",
    prompt_text="èŠ±æœµç»½æ”¾",
    ratio="1024:1024"
)
```

### ç¤ºä¾‹ 4: æ·»åŠ æ°´å°

```python
from runway import RunwayVideoRequest

request = RunwayVideoRequest(
    promptImage="https://example.com/image.jpg",
    model="runwayml-gen4_turbo-5",
    promptText="çŒ«å’ªè·³èˆ",
    watermark=True,  # æ·»åŠ æ°´å°
    duration=5
)
```

### ç¤ºä¾‹ 5: å‚æ•°éªŒè¯

```python
from runway import RunwayClient, create_video_5s

client = RunwayClient(api_token="ä½ çš„token")
request = create_video_5s(image_url="https://example.com/image.jpg")

# å‘é€å‰éªŒè¯
is_valid, error = client.validate_request(request)
if not is_valid:
    print(f"æ— æ•ˆè¯·æ±‚: {error}")
else:
    response = client.generate_video(request)
```

## ğŸ” æŸ¥è¯¢è§†é¢‘çŠ¶æ€

### æŸ¥è¯¢æ¥å£

```python
from runway import RunwayClient

client = RunwayClient(api_token="ä½ çš„token")

# æŸ¥è¯¢è§†é¢‘çŠ¶æ€
response = client.query_video("2f19d8a7-3b74-4fc4-af42-d0bcadbaec54")
status = response["data"]["status"]  # processing, completed, failed

print(f"çŠ¶æ€: {status}")
if status == "completed":
    print(f"è§†é¢‘URL: {response['data']['video_url']}")
```

### ç­‰å¾…å®Œæˆ

```python
from runway import RunwayClient, wait_for_video_completion

client = RunwayClient(api_token="ä½ çš„token")

# è½®è¯¢ç›´åˆ°å®Œæˆ
result = wait_for_video_completion(
    client,
    task_id,
    timeout=600,      # æœ€å¤šç­‰å¾… 10 åˆ†é’Ÿ
    poll_interval=10   # æ¯ 10 ç§’æ£€æŸ¥ä¸€æ¬¡
)

print(f"âœ“ è§†é¢‘å®Œæˆ: {result['data']['video_url']}")
```

### æŸ¥è¯¢çŠ¶æ€å€¼

- `processing`: å¤„ç†ä¸­ï¼ˆè§†é¢‘æ­£åœ¨ç”Ÿæˆï¼‰
- `completed`: å®Œæˆï¼ˆè§†é¢‘å·²ç”Ÿæˆï¼Œå¯ä¸‹è½½ï¼‰
- `failed`: å¤±è´¥ï¼ˆç”Ÿæˆå¤±è´¥ï¼ŒæŸ¥çœ‹ error å­—æ®µï¼‰

## ğŸ§ª æµ‹è¯•

### è¿è¡Œç¤ºä¾‹ï¼ˆå¹²è·‘æ¨¡å¼ï¼Œä¸äº§ç”Ÿè´¹ç”¨ï¼‰
```bash
python3 -m runway.runway_examples
```

### è¿è¡ŒæŸ¥è¯¢ç¤ºä¾‹ï¼ˆå¹²è·‘æ¨¡å¼ï¼Œä¸äº§ç”Ÿè´¹ç”¨ï¼‰
```bash
python3 -m runway.query_examples
```

## ğŸ“Š å®é™… Payload æ ¼å¼

```json
{
  "promptImage": "https://example.com/image.jpg",
  "model": "runwayml-gen4_turbo-5",
  "promptText": "çŒ«å’ªè·³èˆ",
  "watermark": false,
  "duration": 5,
  "ratio": "1280:768"
}
```

## ğŸ’° æˆæœ¬æ§åˆ¶å»ºè®®

1. **ä¼˜å…ˆä½¿ç”¨5ç§’è§†é¢‘** - æµ‹è¯•æ—¶æˆæœ¬æ›´ä½
2. **ä½¿ç”¨å‚æ•°éªŒè¯** - å‘é€å‰ç”¨ `validate_request()` éªŒè¯
3. **å…ˆç”¨å¹²è·‘ç¤ºä¾‹æµ‹è¯•** - è¿è¡Œç¤ºä¾‹ä¸ä¼šäº§ç”Ÿè´¹ç”¨
4. **é€‰æ‹©åˆé€‚æ—¶é•¿** - æ ¹æ®éœ€æ±‚é€‰æ‹©5ç§’æˆ–10ç§’

## ğŸ”’ å®‰å…¨å»ºè®®

### ä½¿ç”¨ç¯å¢ƒå˜é‡
```python
import os
token = os.getenv("RUNWAY_API_TOKEN")
client = RunwayClient(api_token=token)
```

### éªŒè¯è¾“å…¥
```python
if not image_url or not image_url.startswith("https://"):
    raise ValueError("æ— æ•ˆçš„å›¾ç‰‡URL")
```

## âš ï¸ é‡è¦æ³¨æ„äº‹é¡¹

1. **æ¨¡å‹å’Œæ—¶é•¿å¿…é¡»åŒ¹é…**
   - `runwayml-gen4_turbo-5` éœ€è¦ `duration=5`
   - `runwayml-gen4_turbo-10` éœ€è¦ `duration=10`

2. **å¿…é¡»æä¾›å›¾ç‰‡URL**
   - å¿…é¡»æ˜¯æœ‰æ•ˆçš„HTTPS URL

3. **APIè´¹ç”¨**
   - æ¯æ¬¡è¯·æ±‚éƒ½ä¼šäº§ç”Ÿè´¹ç”¨
   - å‘é€å‰åŠ¡å¿…éªŒè¯å‚æ•°

## ğŸ› é”™è¯¯å¤„ç†

```python
try:
    response = client.generate_video(request)
    if response["status_code"] == 200:
        print("æˆåŠŸ!")
    else:
        print(f"é”™è¯¯: {response['status_code']}")
except Exception as e:
    print(f"APIé”™è¯¯: {e}")
```

## ğŸ“š ä¸å…¶ä»–æ¨¡å—çš„åŒºåˆ«

| ç‰¹æ€§ | Runway | Kling | Jimeng |
|------|--------|-------|--------|
| è¾“å…¥ | å›¾ç‰‡ â†’ è§†é¢‘ | å›¾ç‰‡ â†’ è§†é¢‘ | æ–‡æœ¬ â†’ è§†é¢‘ |
| æ—¶é•¿ | 5ç§’, 10ç§’ | 5ç§’, 10ç§’ | å¯å˜ |
| æ¨¡å‹æ•°é‡ | 2 (Gen4) | 2 (v1, v2-6) | 1 (v3.0) |
| ç›¸æœºæ§åˆ¶ | âœ— | âœ“ | âœ— |
| æ°´å°é€‰é¡¹ | âœ“ | âœ— | âœ— |
| å®½é«˜æ¯” | è‡ªå®šä¹‰ | å¤šç§ | 4ç§å›ºå®š |
| æŸ¥è¯¢åŠŸèƒ½ | âœ“ | âœ“ | âœ“ |

## ğŸ¯ ä½¿ç”¨åœºæ™¯

### é€‚åˆä½¿ç”¨ Runway çš„åœºæ™¯
- éœ€è¦æ§åˆ¶æ°´å°
- éœ€è¦è‡ªå®šä¹‰å®½é«˜æ¯”
- ç®€å•çš„å›¾ç”Ÿè§†é¢‘éœ€æ±‚
- 5ç§’æˆ–10ç§’å›ºå®šæ—¶é•¿

### é€‚åˆä½¿ç”¨ Kling çš„åœºæ™¯
- éœ€è¦ç›¸æœºæ§åˆ¶ï¼ˆå¹³ç§»ã€ç¼©æ”¾ç­‰ï¼‰
- éœ€è¦åŠ¨æ€é®ç½©
- éœ€è¦æ›´ç²¾ç»†çš„æ§åˆ¶

### é€‚åˆä½¿ç”¨ Jimeng çš„åœºæ™¯
- æ–‡æœ¬ç”Ÿæˆè§†é¢‘
- ä¸éœ€è¦æºå›¾ç‰‡
- éœ€è¦å‚è€ƒå›¾ç‰‡ï¼ˆå¯é€‰ï¼‰

## ğŸ‰ æ€»ç»“

âœ… ç®€å•çš„å›¾ç”Ÿè§†é¢‘<br>
âœ… ä¸¤ç§æ—¶é•¿é€‰é¡¹ï¼ˆ5ç§’ã€10ç§’ï¼‰<br>
âœ… æ°´å°æ§åˆ¶<br>
âœ… è‡ªå®šä¹‰å®½é«˜æ¯”<br>
âœ… å‚æ•°éªŒè¯<br>
âœ… æŸ¥è¯¢å’Œè½®è¯¢æ”¯æŒ<br>
âœ… å®Œæ•´æ–‡æ¡£<br>

ç°åœ¨å¯ä»¥ä½¿ç”¨ Runway Gen4 ç”Ÿæˆè§†é¢‘äº†ï¼
