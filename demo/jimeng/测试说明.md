# Jimeng å•å…ƒæµ‹è¯•è¯´æ˜

## ğŸ“Š æµ‹è¯•æ¦‚è§ˆ

Jimeng æ¨¡å—åŒ…å« 27 ä¸ªå…¨é¢çš„å•å…ƒæµ‹è¯•ï¼Œè¦†ç›–æ‰€æœ‰æ ¸å¿ƒåŠŸèƒ½ã€‚

### æµ‹è¯•ç»Ÿè®¡
- **æ€»æµ‹è¯•æ•°**: 27
- **é€šè¿‡æ•°**: 27
- **å¤±è´¥æ•°**: 0
- **é”™è¯¯æ•°**: 0
- **é€šè¿‡ç‡**: 100%

## ğŸƒ è¿è¡Œæµ‹è¯•

### åŸºæœ¬è¿è¡Œ
```bash
python3 -m jimeng.test_jimeng
```

### é¢„æœŸè¾“å‡º
```
======================================================================
Tests run: 27
Successes: 27
Failures: 0
Errors: 0
======================================================================
...
Ran 27 tests in 0.001s

OK
```

## ğŸ§ª æµ‹è¯•è¦†ç›–èŒƒå›´

### 1. è¯·æ±‚åˆ›å»ºæµ‹è¯• (TestJimengVideoRequest)

#### test_basic_request_creation
- æµ‹è¯•åŸºæœ¬è¯·æ±‚åˆ›å»º
- éªŒè¯é»˜è®¤å‚æ•°å€¼

#### test_request_with_all_parameters
- æµ‹è¯•æ‰€æœ‰å‚æ•°çš„è¯·æ±‚
- éªŒè¯å‚æ•°èµ‹å€¼

#### test_request_to_dict
- æµ‹è¯• to_dict() åºåˆ—åŒ–
- éªŒè¯å­—å…¸ç»“æ„

#### test_request_to_json
- æµ‹è¯• to_json() åºåˆ—åŒ–
- éªŒè¯ JSON æ ¼å¼

#### test_request_with_multiple_images
- æµ‹è¯•å¤šå¼ å‚è€ƒå›¾ç‰‡
- éªŒè¯å›¾ç‰‡åˆ—è¡¨

### 2. å®¢æˆ·ç«¯æµ‹è¯• (TestJimengClient)

#### test_client_initialization
- æµ‹è¯•å®¢æˆ·ç«¯åˆå§‹åŒ–
- éªŒè¯é»˜è®¤å€¼

#### test_client_custom_base_url
- æµ‹è¯•è‡ªå®šä¹‰ base URL
- éªŒè¯ URL è®¾ç½®

#### test_validate_valid_request
- æµ‹è¯•æœ‰æ•ˆè¯·æ±‚éªŒè¯
- éªŒè¯ is_valid=True

#### test_validate_missing_model
- æµ‹è¯•ç¼ºå°‘ model çš„éªŒè¯
- éªŒè¯é”™è¯¯æ¶ˆæ¯

#### test_validate_missing_prompt
- æµ‹è¯•ç¼ºå°‘ prompt çš„éªŒè¯
- éªŒè¯é”™è¯¯æ¶ˆæ¯

#### test_validate_invalid_aspect_ratio
- æµ‹è¯•æ— æ•ˆå®½é«˜æ¯”
- éªŒè¯éªŒè¯å¤±è´¥

#### test_validate_invalid_size
- æµ‹è¯•æ— æ•ˆåˆ†è¾¨ç‡
- éªŒè¯éªŒè¯å¤±è´¥

#### test_validate_all_aspect_ratios
- æµ‹è¯•æ‰€æœ‰æœ‰æ•ˆå®½é«˜æ¯”
- éªŒè¯: 16:9, 9:16, 1:1, 4:3

#### test_validate_all_sizes
- æµ‹è¯•æ‰€æœ‰æœ‰æ•ˆåˆ†è¾¨ç‡
- éªŒè¯: 720P, 1080P

### 3. è¾…åŠ©å‡½æ•°æµ‹è¯• (TestHelperFunctions)

#### test_create_simple_video_request
- æµ‹è¯•ç®€å•è¯·æ±‚åˆ›å»ºå‡½æ•°
- éªŒè¯é»˜è®¤å‚æ•°

#### test_create_simple_video_request_custom_params
- æµ‹è¯•è‡ªå®šä¹‰å‚æ•°
- éªŒè¯å‚æ•°ä¼ é€’

#### test_create_video_with_images
- æµ‹è¯•å›¾ç‰‡è¯·æ±‚åˆ›å»º
- éªŒè¯å›¾ç‰‡åˆ—è¡¨

#### test_create_video_with_images_custom_params
- æµ‹è¯•è‡ªå®šä¹‰å›¾ç‰‡è¯·æ±‚
- éªŒè¯æ‰€æœ‰å‚æ•°

### 4. æšä¸¾æµ‹è¯• (TestEnums)

#### test_aspect_ratio_enum
- æµ‹è¯•å®½é«˜æ¯”æšä¸¾å€¼
- éªŒè¯:
  - RATIO_16_9 = "16:9"
  - RATIO_9_16 = "9:16"
  - RATIO_1_1 = "1:1"
  - RATIO_4_3 = "4:3"

#### test_video_size_enum
- æµ‹è¯•åˆ†è¾¨ç‡æšä¸¾å€¼
- éªŒè¯:
  - SIZE_720P = "720P"
  - SIZE_1080P = "1080P"

### 5. Payload æ ¼å¼æµ‹è¯• (TestPayloadFormat)

#### test_simple_payload_format
- æµ‹è¯•ç®€å•è¯·æ±‚çš„ payload æ ¼å¼
- éªŒè¯æ‰€æœ‰å¿…éœ€å­—æ®µ
- éªŒè¯å­—æ®µå€¼

#### test_payload_with_images_format
- æµ‹è¯•å¸¦å›¾ç‰‡çš„ payload æ ¼å¼
- éªŒè¯å›¾ç‰‡åˆ—è¡¨

#### test_json_serialization
- æµ‹è¯• JSON åºåˆ—åŒ–
- éªŒè¯æœ‰æ•ˆçš„ JSON
- éªŒè¯æ ¼å¼åŒ–

### 6. è¾¹ç•Œæ¡ä»¶æµ‹è¯• (TestEdgeCases)

#### test_empty_images_list
- æµ‹è¯•ç©ºå›¾ç‰‡åˆ—è¡¨
- éªŒè¯æ­£ç¡®å¤„ç†

#### test_long_prompt
- æµ‹è¯•é•¿ promptï¼ˆ1000 å­—ç¬¦ï¼‰
- éªŒè¯é•¿åº¦ä¿ç•™

#### test_special_characters_in_prompt
- æµ‹è¯•ç‰¹æ®Šå­—ç¬¦
- éªŒè¯ Unicode æ”¯æŒ
- éªŒè¯ JSON åºåˆ—åŒ–

#### test_multiple_validation_errors
- æµ‹è¯•å¤šä¸ªéªŒè¯é”™è¯¯
- éªŒè¯é”™è¯¯æ•è·

## ğŸ“ æµ‹è¯•ä»£ç ç»“æ„

```python
# åŸºæœ¬ç»“æ„
class Test<Feature>(unittest.TestCase):
    def test_<feature_description>(self):
        # å‡†å¤‡
        # æ‰§è¡Œ
        # éªŒè¯
        self.assertEqual(expected, actual)
```

## âœ… æµ‹è¯•ç±»åˆ«

| ç±»åˆ« | æ•°é‡ | è¯´æ˜ |
|------|------|------|
| è¯·æ±‚åˆ›å»º | 5 | æµ‹è¯• JimengVideoRequest åˆ›å»º |
| å®¢æˆ·ç«¯ | 10 | æµ‹è¯• JimengClient åŠŸèƒ½ |
| è¾…åŠ©å‡½æ•° | 4 | æµ‹è¯• helper å‡½æ•° |
| æšä¸¾ | 2 | æµ‹è¯• Enum å€¼ |
| Payload æ ¼å¼ | 3 | æµ‹è¯• JSON æ ¼å¼ |
| è¾¹ç•Œæ¡ä»¶ | 3 | æµ‹è¯•ç‰¹æ®Šæƒ…å†µ |
| **æ€»è®¡** | **27** | - |

## ğŸ” éªŒè¯é¡¹

### å¿…éœ€å­—æ®µéªŒè¯
- âœ“ model
- âœ“ prompt

### å¯é€‰å­—æ®µéªŒè¯
- âœ“ aspect_ratio (16:9, 9:16, 1:1, 4:3)
- âœ“ size (720P, 1080P)
- âœ“ images (list)

### åºåˆ—åŒ–éªŒè¯
- âœ“ to_dict() è½¬å­—å…¸
- âœ“ to_json() è½¬ JSON
- âœ“ JSON æ ¼å¼æ­£ç¡®

### åŠŸèƒ½éªŒè¯
- âœ“ åˆ›å»ºç®€å•è¯·æ±‚
- âœ“ åˆ›å»ºå›¾ç‰‡è¯·æ±‚
- âœ“ å‚æ•°éªŒè¯

## ğŸ’¡ æœ€ä½³å®è·µ

### è¿è¡Œå•ä¸ªæµ‹è¯•
```python
# è¿è¡Œç‰¹å®šæµ‹è¯•ç±»
python3 -m unittest jimeng.test_jimeng.TestJimengClient

# è¿è¡Œç‰¹å®šæµ‹è¯•
python3 -m unittest jimeng.test_jimeng.TestJimengClient.test_client_initialization
```

### è¯¦ç»†è¾“å‡º
```bash
# æ˜¾ç¤ºæ¯ä¸ªæµ‹è¯•
python3 -m jimeng.test_jimeng
```

### ç”Ÿæˆè¦†ç›–ç‡æŠ¥å‘Šï¼ˆéœ€è¦ coverage å·¥å…·ï¼‰
```bash
pip install coverage
coverage run -m jimeng.test_jimeng
coverage report
coverage html
```

## ğŸ› å¸¸è§é—®é¢˜

### Q: å¦‚ä½•æ·»åŠ æ–°æµ‹è¯•ï¼Ÿ
A: åœ¨ test_jimeng.py ä¸­æ·»åŠ æ–°çš„ test_* æ–¹æ³•ï¼š
```python
def test_new_feature(self):
    # Arrange
    request = JimengVideoRequest(...)

    # Act
    result = request.to_dict()

    # Assert
    self.assertEqual(expected, result)
```

### Q: æµ‹è¯•å¤±è´¥æ—¶æ€ä¹ˆåŠï¼Ÿ
A:
1. æŸ¥çœ‹é”™è¯¯æ¶ˆæ¯
2. æ£€æŸ¥æµ‹è¯•é€»è¾‘
3. æ£€æŸ¥è¢«æµ‹è¯•çš„ä»£ç 
4. è¿è¡Œå•ä¸ªæµ‹è¯•è°ƒè¯•

### Q: å¦‚ä½•è·³è¿‡æŸä¸ªæµ‹è¯•ï¼Ÿ
A: ä½¿ç”¨ @unittest.skip è£…é¥°å™¨ï¼š
```python
@unittest.skip("ä¸´æ—¶è·³è¿‡")
def test_something(self):
    pass
```

### Q: å¦‚ä½•æµ‹è¯•å¼‚å¸¸ï¼Ÿ
A: ä½¿ç”¨ assertRaisesï¼š
```python
with self.assertRaises(ValueError):
    # ä¼šæŠ›å‡º ValueError çš„ä»£ç 
    pass
```

## ğŸ“š å…³è”æ–‡æ¡£

- [jimeng_client.py](jimeng_client.py) - è¢«æµ‹è¯•çš„ä»£ç 
- [README.md](README.md) - API æ–‡æ¡£
- [ä½¿ç”¨è¯´æ˜.md](ä½¿ç”¨è¯´æ˜.md) - ä½¿ç”¨æŒ‡å—

## ğŸ¯ æµ‹è¯•ç›®æ ‡

1. **ç¡®ä¿åŠŸèƒ½æ­£ç¡®** - æ‰€æœ‰åŠŸèƒ½éƒ½æŒ‰é¢„æœŸå·¥ä½œ
2. **é˜²æ­¢å›å½’** - ä»£ç ä¿®æ”¹ä¸ä¼šç ´åç°æœ‰åŠŸèƒ½
3. **æ–‡æ¡£éªŒè¯** - ç¤ºä¾‹ä»£ç èƒ½æ­£ç¡®è¿è¡Œ
4. **è¾¹ç•Œæµ‹è¯•** - ç‰¹æ®Šè¾“å…¥è¢«æ­£ç¡®å¤„ç†

## âœ¨ æ€»ç»“

âœ… 27 ä¸ªå…¨é¢çš„å•å…ƒæµ‹è¯•<br>
âœ… 100% é€šè¿‡ç‡<br>
âœ… è¦†ç›–æ‰€æœ‰æ ¸å¿ƒåŠŸèƒ½<br>
âœ… å¿«é€Ÿæ‰§è¡Œï¼ˆ<1msï¼‰<br>
âœ… æ˜“äºç»´æŠ¤å’Œæ‰©å±•

ç°åœ¨å¯ä»¥å®‰å¿ƒä½¿ç”¨ Jimeng API æ¨¡å—äº†ï¼
